{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "85144634-fbb7-4f2a-9eb2-61fcea19076b",
   "metadata": {},
   "outputs": [],
   "source": [
    "#import sys\n",
    "#sys.path.append('/Users/ezragoliath/Desktop/Masters thesis/code/modules')\n",
    "#sys.path.append('/home/bmll/local')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "7504ab19-2b58-49a2-a048-10c861b916c0",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'auxiliary_functions.py'"
      ]
     },
     "execution_count": 1,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import bmll2 as b2\n",
    "b2.get_file('modules/auxiliary_functions.py')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "5e03e2c5-0a8f-4364-a0d1-037b794fa11e",
   "metadata": {},
   "outputs": [],
   "source": [
    "import auxiliary_functions as af\n",
    "#import data_handling_functions as dh\n",
    "\n",
    "import random\n",
    "import math\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "from pandas import StringDtype\n",
    "from pathlib import Path\n",
    "import shutil\n",
    "\n",
    "# we need to add the functions because having them in the .py files only mkaes it accessible in those files so we either import it\n",
    "# again or we need to do something like dh.pd.DataFrame. The dh. part means that use the module dh and from that module use pd.DataFrame\n",
    "\n",
    "import matplotlib.pyplot as plt\n",
    "import matplotlib.ticker as ticker\n",
    "from matplotlib.ticker import LogFormatterSciNotation"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "44eb0323-e249-4af3-8aac-0b9252cf3cec",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 1min 1s, sys: 1min 13s, total: 2min 15s\n",
      "Wall time: 1min 59s\n"
     ]
    }
   ],
   "source": [
    "%%time\n",
    "files = b2.list_files(path = 'top_100(Volume)')\n",
    "files\n",
    "for f in files:\n",
    "    b2.get_file(f'top_100(Volume)/{f}')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "bf086a51-7056-48d9-9677-28b3a90b398b",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "CPU times: user 52 s, sys: 4.54 s, total: 56.5 s\n",
      "Wall time: 56.6 s\n"
     ]
    }
   ],
   "source": [
    "%%time\n",
    "def load_stock(csv):\n",
    "    df = pd.read_csv(csv, parse_dates = ['DateTime', 'Date'])\n",
    "    df = df.rename(columns = {'Ticker': 'RIC'})\n",
    "    return df\n",
    "    \n",
    "stocks = {\n",
    "    'GRT': load_stock('GRT.csv'),\n",
    "    'OMU': load_stock('OMU.csv'),\n",
    "    'RMH': load_stock('RMH.csv'),\n",
    "    'MTN': load_stock('MTN.csv'),\n",
    "    'ABG': load_stock('ABG.csv'),\n",
    "    'GFI': load_stock('GFI.csv'),\n",
    "    'SHP': load_stock('SHP.csv'),\n",
    "    'AGL': load_stock('AGL.csv'),\n",
    "    'MNP': load_stock('MNP.csv'),\n",
    "    'RNI': load_stock('RNI.csv'),\n",
    "}"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "b007c291-4d10-4066-a7d7-e9f4e9416a1e",
   "metadata": {},
   "outputs": [],
   "source": [
    "def process_stock(stock_data, N = 4, participation_method = 'homogeneous', timing_method = 'immediate', impact_method = 'all'):\n",
    "    features_list = []\n",
    "\n",
    "    for date, day_D in stock_data.groupby('Date', sort = True):\n",
    "        #print(date)\n",
    "        \n",
    "        trades = day_D\n",
    "        \n",
    "        if trades.empty:\n",
    "            continue\n",
    "\n",
    "        f = af.trader_participation(N = N, method = participation_method, alpha = 2, f_min = 1,f_max = trades.shape[0], seed = 1)\n",
    "\n",
    "        c = af.cumulative_probs(f)\n",
    "        output = af.orders(N = N, trades = trades, cumulative_probs = c)\n",
    "\n",
    "        for n in range(N):\n",
    "            trader_n_trades = trades.iloc[output[n]]\n",
    "\n",
    "            if trader_n_trades.empty:\n",
    "                continue\n",
    "\n",
    "            trader_n_metaorders = af.metaorders(trader_n_trades)\n",
    "\n",
    "            if len(trader_n_metaorders) == 0:\n",
    "                continue\n",
    "\n",
    "            trader_n_features = af.impact_df(trader_n_metaorders, timing_method = timing_method, impact_method = impact_method)\n",
    "\n",
    "            features_list.append(trader_n_features)\n",
    "\n",
    "    if features_list:\n",
    "        return pd.concat(features_list, ignore_index = True)\n",
    "    else:\n",
    "        return pd.DataFrame()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "id": "978f67a2-190e-441f-85cc-0542b2abac60",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>MIC</th>\n",
       "      <th>RIC</th>\n",
       "      <th>ListingId</th>\n",
       "      <th>Date</th>\n",
       "      <th>DateTime</th>\n",
       "      <th>ExchangeSequenceNo</th>\n",
       "      <th>Daily Volume</th>\n",
       "      <th>Daily Volatility</th>\n",
       "      <th>Trade Sign</th>\n",
       "      <th>Price</th>\n",
       "      <th>Volume</th>\n",
       "      <th>Mid-price before</th>\n",
       "      <th>Mid-price after(immediate)</th>\n",
       "      <th>Mid-price after(delayed)</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>XJSE</td>\n",
       "      <td>GRT</td>\n",
       "      <td>418405583</td>\n",
       "      <td>2023-01-10</td>\n",
       "      <td>2023-01-10 09:02:32.811833</td>\n",
       "      <td>128673</td>\n",
       "      <td>2714257.0</td>\n",
       "      <td>0.021111</td>\n",
       "      <td>1</td>\n",
       "      <td>1480.0</td>\n",
       "      <td>2144.0</td>\n",
       "      <td>1477.5</td>\n",
       "      <td>1479.5</td>\n",
       "      <td>1477.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>XJSE</td>\n",
       "      <td>GRT</td>\n",
       "      <td>418405583</td>\n",
       "      <td>2023-01-10</td>\n",
       "      <td>2023-01-10 09:02:32.812055</td>\n",
       "      <td>128677</td>\n",
       "      <td>2714257.0</td>\n",
       "      <td>0.021111</td>\n",
       "      <td>1</td>\n",
       "      <td>1480.0</td>\n",
       "      <td>245.0</td>\n",
       "      <td>1477.5</td>\n",
       "      <td>1480.0</td>\n",
       "      <td>1477.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>XJSE</td>\n",
       "      <td>GRT</td>\n",
       "      <td>418405583</td>\n",
       "      <td>2023-01-10</td>\n",
       "      <td>2023-01-10 09:02:32.812078</td>\n",
       "      <td>128678</td>\n",
       "      <td>2714257.0</td>\n",
       "      <td>0.021111</td>\n",
       "      <td>1</td>\n",
       "      <td>1480.0</td>\n",
       "      <td>2312.0</td>\n",
       "      <td>1477.5</td>\n",
       "      <td>1480.0</td>\n",
       "      <td>1477.5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>XJSE</td>\n",
       "      <td>GRT</td>\n",
       "      <td>418405583</td>\n",
       "      <td>2023-01-10</td>\n",
       "      <td>2023-01-10 09:02:32.812115</td>\n",
       "      <td>128679</td>\n",
       "      <td>2714257.0</td>\n",
       "      <td>0.021111</td>\n",
       "      <td>1</td>\n",
       "      <td>1480.0</td>\n",
       "      <td>2865.0</td>\n",
       "      <td>1477.5</td>\n",
       "      <td>1480.0</td>\n",
       "      <td>1480.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>XJSE</td>\n",
       "      <td>GRT</td>\n",
       "      <td>418405583</td>\n",
       "      <td>2023-01-10</td>\n",
       "      <td>2023-01-10 09:02:32.984925</td>\n",
       "      <td>128759</td>\n",
       "      <td>2714257.0</td>\n",
       "      <td>0.021111</td>\n",
       "      <td>1</td>\n",
       "      <td>1479.0</td>\n",
       "      <td>10762.0</td>\n",
       "      <td>1480.0</td>\n",
       "      <td>1479.5</td>\n",
       "      <td>1478.5</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "    MIC  RIC  ListingId       Date                   DateTime  \\\n",
       "0  XJSE  GRT  418405583 2023-01-10 2023-01-10 09:02:32.811833   \n",
       "1  XJSE  GRT  418405583 2023-01-10 2023-01-10 09:02:32.812055   \n",
       "2  XJSE  GRT  418405583 2023-01-10 2023-01-10 09:02:32.812078   \n",
       "3  XJSE  GRT  418405583 2023-01-10 2023-01-10 09:02:32.812115   \n",
       "4  XJSE  GRT  418405583 2023-01-10 2023-01-10 09:02:32.984925   \n",
       "\n",
       "   ExchangeSequenceNo  Daily Volume  Daily Volatility  Trade Sign   Price  \\\n",
       "0              128673     2714257.0          0.021111           1  1480.0   \n",
       "1              128677     2714257.0          0.021111           1  1480.0   \n",
       "2              128678     2714257.0          0.021111           1  1480.0   \n",
       "3              128679     2714257.0          0.021111           1  1480.0   \n",
       "4              128759     2714257.0          0.021111           1  1479.0   \n",
       "\n",
       "    Volume  Mid-price before  Mid-price after(immediate)  \\\n",
       "0   2144.0            1477.5                      1479.5   \n",
       "1    245.0            1477.5                      1480.0   \n",
       "2   2312.0            1477.5                      1480.0   \n",
       "3   2865.0            1477.5                      1480.0   \n",
       "4  10762.0            1480.0                      1479.5   \n",
       "\n",
       "   Mid-price after(delayed)  \n",
       "0                    1477.5  \n",
       "1                    1477.5  \n",
       "2                    1477.5  \n",
       "3                    1480.0  \n",
       "4                    1478.5  "
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "stocks['GRT'].head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "bb1a605c-7c27-43b4-a6d8-e74052ceddc0",
   "metadata": {
    "editable": true,
    "slideshow": {
     "slide_type": ""
    },
    "tags": []
   },
   "outputs": [],
   "source": [
    "%%time\n",
    "all_features = []\n",
    "\n",
    "for ric, data in stocks.items():\n",
    "    print(f'Processing {ric}')\n",
    "    stock_features = process_stock(data, N = 4, participation_method = 'homogenous', timing_method = 'immediate', impact_method = 'all')\n",
    "\n",
    "    if not stock_features.empty:\n",
    "        all_features.append(stock_features)\n",
    "\n",
    "homo_4_immediate = pd.concat(all_features, ignore_index = True)\n",
    "homo_4_immediate.to_csv('homo_4_immediate.csv', index = False)\n",
    "b2.put_file('homo_4_immediate.csv', 'test_data')\n",
    "\n",
    "# takes about 4 hours to run"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "id": "744f6766-a3d4-4c84-91ed-17393c7d1733",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>RIC</th>\n",
       "      <th>Date</th>\n",
       "      <th>Start time</th>\n",
       "      <th>End time</th>\n",
       "      <th>daily volume</th>\n",
       "      <th>intraday volatility</th>\n",
       "      <th>number child orders</th>\n",
       "      <th>volume traded</th>\n",
       "      <th>trade sign</th>\n",
       "      <th>impact(shortfall)</th>\n",
       "      <th>impact(ave per trade)</th>\n",
       "      <th>impact(simple)</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>GRT</td>\n",
       "      <td>2023-01-03 00:00:00</td>\n",
       "      <td>2023-01-03 09:05:10.842369</td>\n",
       "      <td>2023-01-03 09:05:23.313963</td>\n",
       "      <td>6862853.0</td>\n",
       "      <td>0.034551</td>\n",
       "      <td>2</td>\n",
       "      <td>5709.0</td>\n",
       "      <td>1</td>\n",
       "      <td>0.001739</td>\n",
       "      <td>0.000878</td>\n",
       "      <td>0.001731</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>GRT</td>\n",
       "      <td>2023-01-03 00:00:00</td>\n",
       "      <td>2023-01-03 09:13:38.621423</td>\n",
       "      <td>2023-01-03 09:23:19.168528</td>\n",
       "      <td>6862853.0</td>\n",
       "      <td>0.034551</td>\n",
       "      <td>4</td>\n",
       "      <td>11789.0</td>\n",
       "      <td>-1</td>\n",
       "      <td>0.00116</td>\n",
       "      <td>0.000164</td>\n",
       "      <td>-0.00069</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>GRT</td>\n",
       "      <td>2023-01-03 00:00:00</td>\n",
       "      <td>2023-01-03 09:36:01.673338</td>\n",
       "      <td>2023-01-03 10:15:32.159365</td>\n",
       "      <td>6862853.0</td>\n",
       "      <td>0.034551</td>\n",
       "      <td>10</td>\n",
       "      <td>26394.0</td>\n",
       "      <td>-1</td>\n",
       "      <td>-0.000634</td>\n",
       "      <td>0.00005</td>\n",
       "      <td>0.001382</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>GRT</td>\n",
       "      <td>2023-01-03 00:00:00</td>\n",
       "      <td>2023-01-03 10:16:22.407365</td>\n",
       "      <td>2023-01-03 10:16:22.490396</td>\n",
       "      <td>6862853.0</td>\n",
       "      <td>0.034551</td>\n",
       "      <td>2</td>\n",
       "      <td>6563.0</td>\n",
       "      <td>-1</td>\n",
       "      <td>0.001378</td>\n",
       "      <td>-0.0</td>\n",
       "      <td>0.000689</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>GRT</td>\n",
       "      <td>2023-01-03 00:00:00</td>\n",
       "      <td>2023-01-03 10:16:22.541073</td>\n",
       "      <td>2023-01-03 10:16:23.651954</td>\n",
       "      <td>6862853.0</td>\n",
       "      <td>0.034551</td>\n",
       "      <td>2</td>\n",
       "      <td>15862.0</td>\n",
       "      <td>-1</td>\n",
       "      <td>0.001723</td>\n",
       "      <td>0.000726</td>\n",
       "      <td>0.001033</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   RIC                 Date                  Start time  \\\n",
       "0  GRT  2023-01-03 00:00:00  2023-01-03 09:05:10.842369   \n",
       "1  GRT  2023-01-03 00:00:00  2023-01-03 09:13:38.621423   \n",
       "2  GRT  2023-01-03 00:00:00  2023-01-03 09:36:01.673338   \n",
       "3  GRT  2023-01-03 00:00:00  2023-01-03 10:16:22.407365   \n",
       "4  GRT  2023-01-03 00:00:00  2023-01-03 10:16:22.541073   \n",
       "\n",
       "                     End time daily volume intraday volatility  \\\n",
       "0  2023-01-03 09:05:23.313963    6862853.0            0.034551   \n",
       "1  2023-01-03 09:23:19.168528    6862853.0            0.034551   \n",
       "2  2023-01-03 10:15:32.159365    6862853.0            0.034551   \n",
       "3  2023-01-03 10:16:22.490396    6862853.0            0.034551   \n",
       "4  2023-01-03 10:16:23.651954    6862853.0            0.034551   \n",
       "\n",
       "  number child orders volume traded trade sign impact(shortfall)  \\\n",
       "0                   2        5709.0          1          0.001739   \n",
       "1                   4       11789.0         -1           0.00116   \n",
       "2                  10       26394.0         -1         -0.000634   \n",
       "3                   2        6563.0         -1          0.001378   \n",
       "4                   2       15862.0         -1          0.001723   \n",
       "\n",
       "  impact(ave per trade) impact(simple)  \n",
       "0              0.000878       0.001731  \n",
       "1              0.000164       -0.00069  \n",
       "2               0.00005       0.001382  \n",
       "3                  -0.0       0.000689  \n",
       "4              0.000726       0.001033  "
      ]
     },
     "execution_count": 8,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "homo_4_immediate.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "53b43872-dc3f-4570-a3ff-78c7c1393fdf",
   "metadata": {
    "scrolled": true
   },
   "outputs": [],
   "source": [
    "%%time\n",
    "stock_data = stocks['GRT'][(stocks['GRT']['Date'] >= '2023-01-01 00:00:00') & \n",
    "                   (stocks['GRT']['Date'] <= '2023-01-31 00:00:00')]\n",
    "\n",
    "N = 4\n",
    "features_list = []\n",
    "for date, day_D in stock_data.groupby('Date', sort = True):\n",
    "\n",
    "    trades = day_D\n",
    "    \n",
    "    f = af.trader_participation(N = N, method = 'homogenous', alpha = 2, f_min = 1, f_max = trades.shape[0] , seed = 1)\n",
    "    c = af.cumulative_probs(f)\n",
    "    \n",
    "    if trades.empty:\n",
    "        continue\n",
    "\n",
    "    output = af.orders(N = N, trades = trades, cumulative_probs = c)\n",
    "    for n in range(N):\n",
    "        \n",
    "        trader_n_trades = trades.iloc[output[n], ]\n",
    "       \n",
    "        if trader_n_trades.empty:\n",
    "            continue\n",
    "\n",
    "        trader_n_metaorders = af.metaorders(trader_n_trades)\n",
    "        \n",
    "        if len(trader_n_metaorders) == 0:\n",
    "            continue\n",
    "\n",
    "        trader_n_features = af.impact_df(trader_n_metaorders, timing_method = 'immediate', impact_method = 'all')\n",
    "        features_list.append(trader_n_features)\n",
    "\n",
    "    print(date)\n",
    "\n",
    "AGL_features = pd.concat(features_list, ignore_index = True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "id": "b206af7c-993d-4091-bee1-0f5b7d431e97",
   "metadata": {},
   "outputs": [],
   "source": [
    "AGL_features.head()\n",
    "AGL_features['Date']       = pd.to_datetime(AGL_features['Date'], errors = 'coerce')\n",
    "AGL_features['Start time'] = pd.to_datetime(AGL_features['Start time'], errors = 'coerce')\n",
    "AGL_features['End time']   = pd.to_datetime(AGL_features['End time'], errors = 'coerce')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "id": "6c05c3eb-636b-4d5f-8e7b-2f1ba692fd65",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>RIC</th>\n",
       "      <th>Date</th>\n",
       "      <th>Start time</th>\n",
       "      <th>End time</th>\n",
       "      <th>daily volume</th>\n",
       "      <th>intraday volatility</th>\n",
       "      <th>number child orders</th>\n",
       "      <th>volume traded</th>\n",
       "      <th>trade sign</th>\n",
       "      <th>impact(shortfall)</th>\n",
       "      <th>impact(ave per trade)</th>\n",
       "      <th>impact(simple)</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>AGL</td>\n",
       "      <td>2023-01-03</td>\n",
       "      <td>2023-01-03 09:05:07.210790</td>\n",
       "      <td>2023-01-03 09:15:38.527148</td>\n",
       "      <td>453236.0</td>\n",
       "      <td>0.018674</td>\n",
       "      <td>4</td>\n",
       "      <td>418.0</td>\n",
       "      <td>1</td>\n",
       "      <td>0.00217</td>\n",
       "      <td>0.000258</td>\n",
       "      <td>0.006093</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>AGL</td>\n",
       "      <td>2023-01-03</td>\n",
       "      <td>2023-01-03 09:18:48.526544</td>\n",
       "      <td>2023-01-03 09:23:20.103792</td>\n",
       "      <td>453236.0</td>\n",
       "      <td>0.018674</td>\n",
       "      <td>6</td>\n",
       "      <td>324.0</td>\n",
       "      <td>-1</td>\n",
       "      <td>0.002989</td>\n",
       "      <td>0.000047</td>\n",
       "      <td>0.002456</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>AGL</td>\n",
       "      <td>2023-01-03</td>\n",
       "      <td>2023-01-03 09:24:17.372554</td>\n",
       "      <td>2023-01-03 09:24:42.540623</td>\n",
       "      <td>453236.0</td>\n",
       "      <td>0.018674</td>\n",
       "      <td>3</td>\n",
       "      <td>291.0</td>\n",
       "      <td>1</td>\n",
       "      <td>0.000776</td>\n",
       "      <td>0.000493</td>\n",
       "      <td>0.000722</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>AGL</td>\n",
       "      <td>2023-01-03</td>\n",
       "      <td>2023-01-03 09:25:00.119142</td>\n",
       "      <td>2023-01-03 09:28:31.092101</td>\n",
       "      <td>453236.0</td>\n",
       "      <td>0.018674</td>\n",
       "      <td>5</td>\n",
       "      <td>425.0</td>\n",
       "      <td>-1</td>\n",
       "      <td>0.002236</td>\n",
       "      <td>0.000047</td>\n",
       "      <td>0.002948</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>AGL</td>\n",
       "      <td>2023-01-03</td>\n",
       "      <td>2023-01-03 09:35:12.840937</td>\n",
       "      <td>2023-01-03 09:35:23.140791</td>\n",
       "      <td>453236.0</td>\n",
       "      <td>0.018674</td>\n",
       "      <td>4</td>\n",
       "      <td>231.0</td>\n",
       "      <td>1</td>\n",
       "      <td>0.000723</td>\n",
       "      <td>0.000178</td>\n",
       "      <td>0.000686</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   RIC       Date                 Start time                   End time  \\\n",
       "0  AGL 2023-01-03 2023-01-03 09:05:07.210790 2023-01-03 09:15:38.527148   \n",
       "1  AGL 2023-01-03 2023-01-03 09:18:48.526544 2023-01-03 09:23:20.103792   \n",
       "2  AGL 2023-01-03 2023-01-03 09:24:17.372554 2023-01-03 09:24:42.540623   \n",
       "3  AGL 2023-01-03 2023-01-03 09:25:00.119142 2023-01-03 09:28:31.092101   \n",
       "4  AGL 2023-01-03 2023-01-03 09:35:12.840937 2023-01-03 09:35:23.140791   \n",
       "\n",
       "  daily volume intraday volatility number child orders volume traded  \\\n",
       "0     453236.0            0.018674                   4         418.0   \n",
       "1     453236.0            0.018674                   6         324.0   \n",
       "2     453236.0            0.018674                   3         291.0   \n",
       "3     453236.0            0.018674                   5         425.0   \n",
       "4     453236.0            0.018674                   4         231.0   \n",
       "\n",
       "  trade sign impact(shortfall) impact(ave per trade) impact(simple)  \n",
       "0          1           0.00217              0.000258       0.006093  \n",
       "1         -1          0.002989              0.000047       0.002456  \n",
       "2          1          0.000776              0.000493       0.000722  \n",
       "3         -1          0.002236              0.000047       0.002948  \n",
       "4          1          0.000723              0.000178       0.000686  "
      ]
     },
     "execution_count": 19,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "AGL_features.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "id": "1fd1d71f-072d-435b-b811-23b6ccb891a3",
   "metadata": {},
   "outputs": [],
   "source": [
    "n_intervals = 40\n",
    "bins        = np.logspace(-6, 0, n_intervals, base = 10, endpoint = True)\n",
    "\n",
    "x_AGL = AGL_features['volume traded'] / AGL_features['daily volume']\n",
    "y_AGL = AGL_features['impact(simple)'] / AGL_features['intraday volatility']\n",
    "\n",
    "#bins_AGL           = np.logspace(np.log10(x_AGL.min()), np.log10(x_AGL.max()), n_intervals, base = 10, endpoint = True)\n",
    "x_bins_AGL         = pd.cut(x_AGL, bins = bins) \n",
    "\n",
    "y_bins_vals_AGL    = y_AGL.groupby(x_bins_AGL, observed = False).mean()\n",
    "x_bins_centers_AGL = [interval.mid for interval in y_bins_vals_AGL.index.categories]\n",
    "\n",
    "alpha    = 0.5\n",
    "sqrt_law = alpha * np.sqrt(x_bins_centers_AGL)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "id": "ccb96fb1-7309-470a-a523-d13a152ee6ef",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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",
      "text/plain": [
       "<Figure size 640x480 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "fig, ax = plt.subplots()\n",
    "\n",
    "ax.set_title('Recovering the square root law', fontsize = 14)\n",
    "ax.set_xscale('log')\n",
    "ax.set_yscale('log')\n",
    "\n",
    "ax.plot(x_bins_centers_AGL, y_bins_vals_AGL, marker = 'o', color = 'blue', label = 'AGL impact curve')\n",
    "#ax.plot(x_bins_centers_MTN, y_bins_vals_MTN, marker = 'o', color = 'yellow', label = 'MTN impact curve')\n",
    "#ax.plot(x_bins_centers_GRT, y_bins_vals_GRT, marker = 'o', color = 'purple', label = 'GRT impact curve')\n",
    "#ax.plot(x_bins_centers_ANG, y_bins_vals_ANG, marker = 'o', color = 'green', label = 'ANG impact curve')\n",
    "#ax.plot(x_bins_centers_SAB, y_bins_vals_SAB, marker = 'o', color = 'orange', label = 'SAB impact curve')\n",
    "ax.plot(x_bins_centers_AGL, sqrt_law, linestyle = '--', color = 'red')\n",
    "\n",
    "ax.set_xlabel(r'Q/$V_{D}$')\n",
    "ax.set_ylabel(r'I(Q/$V_{D}$)/$\\sigma$')\n",
    "\n",
    "# force scientific notation 10^n ticks\n",
    "ax.xaxis.set_major_formatter(LogFormatterSciNotation(labelOnlyBase = False))\n",
    "ax.yaxis.set_major_formatter(LogFormatterSciNotation(labelOnlyBase = False))\n",
    "\n",
    "plt.legend()\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "id": "aa46dd4e-7b91-4673-baf6-1eefba7f49bd",
   "metadata": {},
   "outputs": [],
   "source": [
    "Jan_May_compiled = pd.DataFrame(columns = ['RIC', 'Date', 'Start time', 'End time', 'daily volume', 'intraday volatility', \n",
    "                                           'number child orders', 'volume traded', 'trade sign', 'impact(shortfall)',\n",
    "                                           'impact(ave per trade)', 'impact(simple)'])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "id": "b81871dd-ec73-4cb3-9e63-9fa9af5189a3",
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Done with VODJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with CFRJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with SBKJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with BVTJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with BILJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with OMLJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with MNDJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with BATJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with REMJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with MTNJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with AGLJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with FSRJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with WHLJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with TBSJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with MNPJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with SOLJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with SLMJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with RMHJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with REIJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with INPJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with ANGJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with GRTJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with SABJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with AMSJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with SHPJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with RDFJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with ITUJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with INLJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with NTCJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with CPIJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with FFBJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with APNJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with BGAJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with NPNJn.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with CCOJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with RMIJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with BTIJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with FFAJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with DSYJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n",
      "Done with NEDJ.J02-Jan-2015_TO_27-May-2015_cleaned_processed.csv\n"
     ]
    }
   ],
   "source": [
    "jan_may_path   = Path('/Users/ezragoliath/Desktop/Masters thesis/test data/January_May_processed')\n",
    "jan_may_stocks = jan_may_path.iterdir()\n",
    "\n",
    "N = 4\n",
    "\n",
    "for stock in jan_may_path.iterdir():\n",
    "    if not stock.is_file():\n",
    "        continue\n",
    "\n",
    "    #print(f'Processing {stock.name}...')\n",
    "\n",
    "    # read the already-processed file into a DataFrame\n",
    "    stock_data = pd.read_csv(stock, parse_dates = ['DateTime', 'Date'])  # or read_csv() depending on format\n",
    "\n",
    "    # loop through each day in the data\n",
    "    for date, day_D in stock_data.groupby('Date', sort = False):\n",
    "        \n",
    "        f = af.trader_participation(N = N, method = 'homogenous', alpha = 2, f_min = 1, f_max = 1000, seed = 1)\n",
    "        c = af.cumulative_probs(f)\n",
    "\n",
    "        trades = day_D.loc[day_D['Price'] != 0]\n",
    "        if trades.empty:\n",
    "            continue\n",
    "\n",
    "        output = af.orders(N = N, trades = trades, cumulative_probs = c)\n",
    "        for n in range(N):\n",
    "            \n",
    "            trader_n_trades = trades.iloc[output[n], ]\n",
    "           \n",
    "            if trader_n_trades.empty:\n",
    "                continue\n",
    "\n",
    "            trader_n_metaorders = af.metaorders(trader_n_trades)\n",
    "            \n",
    "            if len(trader_n_metaorders) == 0:\n",
    "                continue\n",
    "\n",
    "            trader_n_features = af.impact_df(trader_n_metaorders, timing_method = 'immediate', impact_method = 'all')\n",
    "            \n",
    "            if not trader_n_features.empty and not trader_n_features.isna().all().all():\n",
    "                Jan_May_compiled = pd.concat([Jan_May_compiled, trader_n_features], ignore_index = True)\n",
    "\n",
    "    print('Done with', stock.name)\n",
    "\n",
    "Jan_May_compiled.to_csv('/Users/ezragoliath/Desktop/Masters thesis/metaorder test dfs/Jan_May_compiled_4_homo_immediate.csv', index = False)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "id": "9c16b68c-aa23-4a61-8398-29a6d328892d",
   "metadata": {},
   "outputs": [],
   "source": [
    "May_Dec_compiled = pd.DataFrame(columns = ['RIC', 'Date', 'Start time', 'End time', 'daily volume', 'intraday volatility',\n",
    "                                           'number child orders', 'volume traded', 'trade sign', 'impact(shortfall)', \n",
    "                                           'impact(ave per trade)', 'impact(simple)'])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "4393b147-e8da-4168-8c1e-d3405b4d1a7f",
   "metadata": {},
   "outputs": [],
   "source": [
    "may_dec_path   = Path('/Users/ezragoliath/Desktop/Masters thesis/test data//May_December_processed')\n",
    "may_dec_stocks = may_dec_path.iterdir()\n",
    "\n",
    "N = 4\n",
    "\n",
    "for stock in may_dec_path.iterdir():\n",
    "    if not stock.is_file():\n",
    "        continue\n",
    "\n",
    "    #print(f'Processing {stock.name}...')\n",
    "\n",
    "    # read the already-processed file into a DataFrame\n",
    "    stock_data = pd.read_csv(stock, parse_dates = ['DateTime', 'Date'])  # or read_csv() depending on format\n",
    "\n",
    "    # loop through each day in the data\n",
    "    for date, day_D in stock_data.groupby('Date', sort = False):\n",
    "        \n",
    "        f = af.trader_participation(N = N, method = 'homogenous', alpha = 2, f_min = 1, f_max = 1000, seed = 1)\n",
    "        c = af.cumulative_probs(f)\n",
    "\n",
    "        trades = day_D.loc[day_D['Price'] != 0]\n",
    "        if trades.empty:\n",
    "            continue\n",
    "\n",
    "        output = af.orders(N = N, trades = trades, cumulative_probs = c)\n",
    "        for n in range(N):\n",
    "            \n",
    "            trader_n_trades = trades.iloc[output[n], ]\n",
    "           \n",
    "            if trader_n_trades.empty:\n",
    "                continue\n",
    "\n",
    "            trader_n_metaorders = af.metaorders(trader_n_trades)\n",
    "            \n",
    "            if len(trader_n_metaorders) == 0:\n",
    "                continue\n",
    "\n",
    "            trader_n_features = af.impact_df(trader_n_metaorders, timing_method = 'immediate', impact_method = 'all')\n",
    "            \n",
    "            if not trader_n_features.empty and not trader_n_features.isna().all().all():\n",
    "                May_DEC_compiled = pd.concat([May_DEC_compiled, trader_n_features], ignore_index = True)\n",
    "\n",
    "    print('Done with', stock.name)\n",
    "\n",
    "May_Dec_compiled.to_csv('/Users/ezragoliath/Desktop/Masters thesis/metaorder test dfs/May_Dec_compiled_4_homo_immediate.csv', index = False)"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "py311-stable",
   "language": "python",
   "name": "py311-stable"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.10"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
